<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Hidden Footprint of EV Battery Metals</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
  <div class="page">
    <header class="hero">
      <div class="hero-text">
        <h1>Hidden Footprint of EV Battery Metals</h1>
        <p>
          These visuals use mining intensity data from the MetalliCan dataset
          (Canada) to show how the metals that go into electric vehicles carry
          significant greenhouse gas, water and energy burdens.
        </p>
        <p class="disclaimer">
          Numbers are <b>illustrative</b> per tonne of material and meant for
          storytelling. You can swap in updated values or more metals later.
        </p>
      </div>
    </header>

    <main class="layout">
      <!-- LEFT: Scenario slider -->
      <section class="panel panel-scenario">
        <h2>Scenario: How big is the EV metal footprint?</h2>
        <p class="panel-intro">
          Drag the slider to explore how many EVs are on the road.
          We approximate how much CO₂ and water use is embedded in the metals
          required to build them.
        </p>

        <div class="slider-row">
          <label for="evCount">Number of EVs</label>
          <input id="evCount" type="range"
                 min="100000" max="10000000" step="100000" value="2000000" />
          <div class="slider-value">
            <span id="evCountLabel"></span>
          </div>
        </div>

        <div class="impact-cards">
          <div class="impact-card">
            <h3>Embedded CO₂ from metals</h3>
            <p class="impact-main"><span id="co2Value"></span> Mt CO₂-eq</p>
            <p class="impact-sub">
              Based on GHG intensity of mining & processing
              per tonne of aluminum, copper, nickel and steel.
            </p>
          </div>
          <div class="impact-card">
            <h3>Embedded water use</h3>
            <p class="impact-main"><span id="waterValue"></span> billion L</p>
            <p class="impact-sub">
              Freshwater withdrawn per tonne of ore / metal processed.
            </p>
          </div>
        </div>

        <p class="note">
          Metal per EV assumptions (kg/vehicle, editable in <code>script.js</code>):<br>
          Aluminum 250, Copper 80, Nickel 30, Steel 800.
        </p>
      </section>

      <!-- RIGHT: charts -->
      <section class="panel panel-charts">
        <div class="chart-block">
          <h2>Impact intensity by metal</h2>
          <p class="panel-intro">
            Each group shows greenhouse gas (GHG), water, and energy intensity
            for key EV metals, per tonne of output.
          </p>
          <div id="barChart"></div>
        </div>

        <div class="chart-block">
          <h2>Overall “harm index” per metal</h2>
          <p class="panel-intro">
            A radial bar encodes a composite index of GHG, water and energy
            (each normalized 0–1). Longer bars & hotter colors mean higher
            combined impact.
          </p>
          <div id="radialChart"></div>
        </div>
      </section>
    </main>

    <section class="panel panel-map-placeholder">
      <h2>Next step: Spatial & land-use footprint</h2>
      <p>
        We will extend this dashboard with:
      </p>
      <ul>
        <li>Maps of mine & smelter locations colored by impact intensity</li>
        <li>Overlays for protected areas, peatlands & water risk</li>
        <li>Storytelling comparing “EV metal hotspots” vs global EV adoption</li>
      </ul>
      <p class="note">
        When you’re ready, we’ll hook in <code>land_cover_table.csv</code>,
        <code>protected_land_table.csv</code>, <code>water_risk_table.csv</code>,
        etc., and build proper spatial layers.
      </p>
    </section>
  </div>

  <script src="script.js"></script>
</body>
</html>
