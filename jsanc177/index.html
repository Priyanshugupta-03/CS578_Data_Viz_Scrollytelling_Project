<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Charging Ahead: The Electric Dream (PRO-EV)</title>
    <link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        .tooltip {
            position: absolute;
            text-align: center;
            padding: 8px;
            font: 12px var(--font-modern);
            background: rgba(255, 255, 255, 0.98);
            border: 2px solid var(--color-muted-teal);
            border-radius: 8px;
            pointer-events: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            color: var(--color-text-dark);
            z-index: 1000;
        }
    </style>
</head>
<body>

    <header class="title-card" id="main-header">
        <h1>Charging Ahead: The Electric Dream ‚ö°</h1>
        <p class="subtitle">Visualizing the Environmental and Technological Superiority of Electric Vehicles (EVs) over Internal Combustion Engines (ICEs).</p>
        <p class="team-info">A CSE 578 Visual Data Story by the Pro-EV Team.</p>
        <nav class="story-links">
            <a href="#section-1">Start Story</a> | 
            <a href="#">The ICE Counter-Argument (Link TBD)</a> 
        </nav>
    </header>

    <main class="story-container">

        <section class="story-section" id="section-1">
            <div class="step-text">
                <h2>Chapter 1: The Ascent of Electric Vehicles üìà</h2>
                <p>The streamgraph below reveals the powerful acceleration of EV adoption. Every year marks a new peak, moving from a niche market to a global force in sustainable transportation. The growth is exponential, showing consumers are truly "Charging Ahead."</p>
                <p class="pop-data">Interactive: Select a year to see the total units sold and the year-over-year growth rate pop up in the chart, highlighting key milestones in the EV revolution.</p>
                <div class="vis-control-container">
                    <p>Highlight Year:</p>
                    <label><input type="radio" name="yearSelect" value="2018"> 2018</label>
                    <label><input type="radio" name="yearSelect" value="2020"> 2020</label>
                    <label><input type="radio" name="yearSelect" value="2022"> 2022</label>
                    <label><input type="radio" name="yearSelect" value="2024" checked> 2024</label>
                </div>
                </div>
            <div class="sticky-visual" id="vis-1-stream"></div>
        </section>

        <section class="story-section" id="section-2">
            <div class="step-text">
                <h2>Chapter 2: Range and Efficiency Milestones üîã</h2>
                <p>The scatter plot shows how modern battery technology has pushed both range and efficiency (km/kWh). As the trend line demonstrates, engineers are successfully delivering more miles for less energy, debunking the myth of "range anxiety."</p>
                <p class="pop-data">Interactive: Use the slider to filter out lower-efficiency models and find the true technological frontrunners in the EV market. You can also pan and zoom to explore dense areas.</p>
                 <div class="vis-control-container">
                    <label for="efficiencySlider">Minimum Efficiency (km/kWh): <span id="efficiencyValue">0</span></label>
                    <input type="range" id="efficiencySlider" min="0" max="15" value="0" step="0.5">
                </div>
                </div>
            <div class="sticky-visual" id="vis-2-scatter"></div>
        </section>

        <section class="story-section" id="section-3">
            <div class="step-text">
                <h2>Chapter 3: Tailpipe vs. Full Lifecycle üí®</h2>
                <p>While an ICE vehicle's emissions are entirely operational (tailpipe), the EV's footprint is primarily in manufacturing. This chart compares the g/km of CO2 for both, showing a substantial lifecycle environmental saving when choosing electric.</p>
                <p class="pop-data">Interactive: Use the dropdown to simulate the impact of different energy grid cleanliness scenarios on the EV's operational emissions, demonstrating that the environmental benefit of EVs only gets stronger as grids get greener.</p>
                <div class="vis-control-container">
                    <label for="gridSelect">Simulate Electricity Grid Scenario:</label>
                    <select id="gridSelect">
                        <option value="coal" selected>Coal Heavy (Worst Case)</option>
                        <option value="mixed">Mixed Renewables/Fossil</option>
                        <option value="clean">Renewables Dominant (Best Case)</option>
                    </select>
                </div>
                </div>
            <div class="sticky-visual" id="vis-3-bar"></div>
        </section>

        <section class="story-section" id="section-4">
            <div class="step-text">
                <h2>Chapter 4: The Clean Grid: The EV Multiplier üåê</h2>
                <p>The full potential of an EV is unlocked by clean energy. This Gauge Visualization shows the current hypothetical clean energy penetration of a sample grid. The cleaner the grid, the lower the EV's operational emissions, and the faster the Windmill spins.</p>
                <p class="pop-data">Interactive: Click the button to see an animation of the grid quickly "improving" its clean energy capacity, and watch the corresponding drop in EV emissions and the dramatic speed-up of the windmill.</p>
                 <div class="vis-control-container">
                    <button id="simulateGridImprovement">Simulate Grid Improvement!</button>
                    <p class="simulation-status" style="font-style: italic; color: var(--color-dusty-purple); margin-top: 10px;">Current EV Emission Factor: 0.75 (30% Clean Grid)</p>
                </div>
                </div>
            <div class="sticky-visual" id="vis-4-gauge"></div>
        </section>

        <section class="story-section" id="section-5">
            <div class="step-text">
                <h2>Chapter 5: Out with the Smog (The Innovative View) ‚òÅÔ∏è</h2>
                <p>This innovative visualization contrasts the toxic air pollutants (NOx, PM2.5, VOCs) of ICE vehicles with the minimal footprint of an EV's operational energy consumption. The clean cloud moves!</p>
                <p class="pop-data">Interactive: Drag the Smog Cloud to move it away from the Clean Cloud, symbolizing the clear air benefits of EVs. Use the toggles to analyze the specific makeup of the ICE pollution.</p>
                 <div class="vis-control-container">
                    <p>Analyze ICE Pollutants:</p>
                    <button id="toggleNOx" class="pollutant-toggle" data-pollutant="NOx">NOx</button>
                    <button id="togglePM25" class="pollutant-toggle" data-pollutant="PM2.5">PM2.5</button>
                    <button id="toggleVOC" class="pollutant-toggle" data-pollutant="VOC">VOC</button>
                    <button id="resetPollutants" class="pollutant-toggle">Reset</button>
                </div>
                </div>
            <div class="sticky-visual" id="vis-5-innovative"></div>
        </section>

        <section class="story-section" id="section-6">
            <div class="step-text">
                <h2>Chapter 6: EVs for Everyone (Price Accessibility) üí∞</h2>
                <p>The perception that EVs are only for the elite is outdated. This Box Plot with a Jitter Swarm shows the price distribution is broadening. The key is finding the "Sweet Spot" the price point where affordability and quality meet.</p>
                <p class="pop-data">Interactive: Hover over the Sweet Spot marker ($\text{\$$40,000}$) to highlight all individual EV models below that price point and show the data density, proving accessibility is no longer a barrier. Additionally, filter by battery type to see how new battery chemistries influence price and market segmentation.</p>
                <div class="vis-control-container">
                    <label for="batteryTypeSelect">Filter by Battery Type:</label>
                    <select id="batteryTypeSelect">
                        <option value="all" selected>All Battery Types</option>
                        </select>
                </div>
                </div>
            <div class="sticky-visual" id="vis-6-box"></div>
        </section>

        <footer class="title-card" id="main-footer">
            <img src="images/sun.png" alt="Sun icon" class="sun-icon">
            <h2>The Road Ahead is Electric.</h2>
            <p>The data confirms the vision: cleaner air, smarter technology, and a rapidly expanding global footprint. The future of transportation is charging ahead.</p>
            <p>&uarr; Scroll up to review the journey.</p>
        </footer>

    </main>

    <div class="tooltip" style="opacity: 0;"></div>

    <script src="index.js"></script>
</body>
</html>