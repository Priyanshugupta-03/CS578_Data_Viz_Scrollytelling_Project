<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EV vs ICE Environmental Trade-Offs</title>
    <!-- Load Tailwind CSS for utility styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load D3.js library -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- Font Awesome for car icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <!-- Link the external CSS file -->
    <link rel="stylesheet" href="scrollytelling.css">
</head>
<body>
    <div id="scrolly-main-container" class="flex flex-col lg:flex-row min-h-screen">
        
        <!-- Left Column: Sticky Graphic (Visualization) - order 2 on large screens -->
        <div id="graphic-col" class="lg:w-2/3 order-1 lg:order-2">
            <!-- D3 SVG will be appended here -->
            <div id="graphic" class="w-full h-full">
                <!-- SVG content will be rendered here by D3 -->
            </div>
        </div>

        <!-- Right Column: Narrative Sections (Scrollable) - order 1 on large screens -->
        <div id="sections-col" class="lg:w-1/3 order-2 lg:order-1">
            <header class="mb-8 p-4 bg-gray-900 rounded-xl shadow-lg border border-gray-700">
                <h1 class="text-3xl font-extrabold text-white mb-2">Charging Ahead or Burning Out?</h1>
                <p class="text-lg text-gray-400">Visualizing the Environmental Trade-Offs Between EVs and ICEs</p>
                <div class="mt-4 flex space-x-2 p-1 bg-gray-700 rounded-lg">
                    <button id="balanced-btn" class="flex-1 py-2 px-4 text-sm font-semibold rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 transition duration-150">Balanced Perspective</button>
                    <button id="critical-btn" class="flex-1 py-2 px-4 text-sm font-semibold rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 transition duration-150">Critical Perspective</button>
                </div>
            </header>

            <div id="sections">
                <!-- Balanced Perspective Narrative (Default) -->
                <div class="space-y-12" data-story="balanced">
                    <div class="step is-active" data-step="0">
                        <!-- Removed explicit text color here; relying on CSS to set it to green/light gray -->
                        <h2>Introduction: The Starting Line</h2>
                        <p>We begin by looking at the environmental debt both an Electric Vehicle (EV) and an Internal Combustion Engine (ICE) vehicle incur before they even leave the factory. Both vehicles start with a low, but equal, environmental impact score.</p>
                        <p class="mt-3 text-sm text-gray-400">The vertical axis represents Environmental Impact, where the bottom is "Worse" and the top is "Better".</p>
                    </div>

                    <div class="step" data-step="1">
                        <h2>Step 1: Manufacturing Emissions</h2>
                        <p>The manufacturing process is where the EV faces its first challenge. Battery production for the EV requires intensive energy and mining, giving it a higher initial $\text{CO}_2$ footprint than a traditional ICE vehicle.</p>
                        <p class="mt-3 text-sm text-gray-400">Metric changes to: Manufacturing $\text{CO}_2$ per vehicle (Lower on the scale is worse for the environment).</p>
                    </div>

                    <div class="step" data-step="2">
                        <h2>Step 2: Operational Efficiency (The Payback)</h2>
                        <p>Once on the road, the EV's advantage becomes clear. Its operation is significantly more efficient than the ICE, especially when powered by a cleaner electricity grid, leading to much lower emissions per kilometer driven.</p>
                        <p class="mt-3 text-sm text-gray-400">Metric changes to: Operational Efficiency (Higher on the scale is better/more efficient).</p>
                    </div>

                    <div class="step" data-step="3">
                        <h2>Step 3: Total Lifecycle Impact</h2>
                        <p>By the end of its life, the question is which vehicle *pays back* its initial environmental debt. For this step, we visualize the **Total $\text{CO}_2$ Emissions per km** over a typical driving distance, showcasing the crossover point. The scale is back to reflecting emissions.</p>
                        <p class="mt-3 text-sm text-gray-400">EV's lower operational emissions often allow it to achieve a lower overall lifecycle footprint compared to ICE.</p>
                    </div>

                    <div class="step" data-step="4">
                        <h2>Conclusion: Policy & Future Outlook</h2>
                        <p>The sustainability of an EV is highly dependent on grid cleanliness. Policy supporting renewable energy sources will accelerate the environmental payoff. Future improvements in battery recycling and production efficiency will further decrease the EV's initial impact.</p>
                        <p class="mt-4 font-semibold text-lg text-blue-400">Thank you for exploring the data.</p>
                    </div>
                </div>

                <!-- Critical Perspective Narrative (Initially Hidden) -->
                <div class="space-y-12 hidden" data-story="critical">
                    <div class="step is-active" data-step="0">
                        <h2>Introduction: The Environmental Toll</h2>
                        <p>We start with a focus on the true environmental cost of both vehicles. Both have an impact, but the hidden costs of EV production deserve close scrutiny.</p>
                        <p class="mt-3 text-sm text-gray-400">The vertical axis represents Environmental Impact, where the bottom is "Worse" and the top is "Better".</p>
                    </div>

                    <div class="step" data-step="1">
                        <h2>Step 1: The Mining Footprint</h2>
                        <p>The EV's battery relies on massive lithium and cobalt mining operations, which often have significant, localized environmental and ethical costs. This immediate debt makes the EV's initial impact much higher.</p>
                        <p class="mt-3 text-sm text-gray-400">Metric changes to: Manufacturing $\text{CO}_2$ per vehicle (Lower on the scale is worse for the environment).</p>
                    </div>

                    <div class="step" data-step="2">
                        <h2>Step 2: Grid Dependency</h2>
                        <p>An EV is only as clean as the electricity grid it plugs into. In areas relying heavily on coal or natural gas, the "zero-emission" car is actually a tailpipe-shift, making its operational efficiency comparable to, or only slightly better than, a modern ICE.</p>
                        <p class="mt-3 text-sm text-gray-400">Metric changes to: Operational Emissions (Higher on the scale is better/more efficient).</p>
                    </div>

                    <div class="step" data-step="3">
                        <h2>Step 3: Longevity and Disposal</h2>
                        <p>Battery degradation and limited recycling infrastructure mean the high initial environmental cost of the EV might not be fully paid off if the car has a shorter lifespan or the battery is improperly disposed of. ICE vehicles, while still polluting, have a longer, more predictable lifecycle curve.</p>
                        <p class="mt-3 text-sm text-gray-400">Focus on the overall Total $\text{CO}_2$ Emissions per km, highlighting the risk of a short EV life.</p>
                    </div>

                    <div class="step" data-step="4">
                        <h2>Conclusion: A Critical View</h2>
                        <p>True sustainability requires addressing manufacturing, sourcing, and grid energy simultaneously. Until these upstream factors are clean, the EV transition risks merely shifting environmental burdens rather than eliminating them.</p>
                        <p class="mt-4 font-semibold text-lg text-red-400">Consider the full lifecycle, not just the tailpipe.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="text-center p-8 text-gray-500 text-sm border-t border-gray-700 mt-12">
        Data Visualization Project based on EPA, IEA, and Our World in Data concepts.
    </footer>

    <!-- Link the external JavaScript file -->
    <script src="scrollytelling.js"></script>
</body>
</html>